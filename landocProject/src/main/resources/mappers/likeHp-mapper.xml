<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="likeHp">
	
	<resultMap type="LikeHp" id="LikeHpListMap">
		<result property="hpNo" column="HP_NO"/>
		<result property="hpName" column="HP_NAME"/>
		<result property="hpPhone" column="HP_PHONE"/>
		<result property="hpPostcode" column="HP_POSTCODE"/>
		<result property="hpAddress" column="HP_ADDRESS"/>
		<result property="hpX" column="HP_X"/>
		<result property="hpY" column="HP_Y"/>
		<result property="hpReview" column="HP_REVIEW"/>
		<result property="hpAvgRate" column="HP_AVG_RATE"/>
		<result property="hpTime" column="HP_TIME"/>
	
	</resultMap>
	<select id="likeHpList" parameterType="string" resultMap="LikeHpListMap">
		SELECT HP.HP_NO, HP.HP_NAME, HP.HP_PHONE,HP.HP_POSTCODE,HP.HP_ADDRESS, HP.HP_X, HP.HP_Y,HP.HP_REVIEW, HP.HP_AVG_RATE,
		NVL(HT.HP_TIME,'정보없음') AS HP_TIME
		FROM HPLIKE HL
		LEFT JOIN HOSPITAL HP ON(HL.HP_NO = HP.HP_NO)
		LEFT JOIN HPTIME HT ON(HL.HP_NO = HT.HP_UNIQUENO)
		WHERE TO_CHAR(SYSDATE,'DAY') = HT.HP_DAY 
		AND C_NO =#{cNo}
		ORDER BY HL.HP_NO DESC
	
	</select>

</mapper>